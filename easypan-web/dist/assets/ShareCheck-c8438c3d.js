import{_ as V,L as N,b as D,u as R,e as i,h as o,o as B,c as E,a as e,i as t,t as l,w as _,p as K,m as A,a1 as L,s as v,E as p,y as M,z as T}from"./index-cd067b4e.js";const f=n=>(M("data-v-d570a77d"),n=n(),T(),n),q={class:"share"},z={class:"body-content"},U=f(()=>e("div",{class:"logo"},[e("span",{class:"iconfont icon-pan"}),e("span",{class:"name"},"魔女云盘")],-1)),$={class:"code-panel"},j={class:"file-info"},F={class:"avatar"},G={class:"share-info"},H={class:"user-info"},J={class:"nick-name"},O={class:"share-time"},P={class:"file-name"},Q={class:"code-body"},W=f(()=>e("div",{class:"tips"},"请输入提取码：",-1)),X={class:"input-area"},Y={__name:"ShareCheck",setup(n){N();const g=D(),y=R(),h={getShareInfo:"/api/showShare/getShareInfo",checkShareCode:"/api/showShare/checkShareCode"},d=y.params.shareId,a=i({});(async()=>{try{const s=await v.get(h.getShareInfo,{params:{shareId:d}});s.data.message!=="分享文件已失效或不存在"?a.value=s.data:p({type:"error",message:"分享文件已失效或不存在"})}catch(s){p({type:"error",message:s})}})();const c=i({}),u=i(),S={code:[{required:!0,message:"请输入提取码"},{min:5,message:"提取码为5位"},{max:5,message:"提取码为5位"}]},m=async()=>{try{await u.value.validate();const s=await v.post(h.checkShareCode,{shareId:d,code:c.value.code});s.data==="success"?g.push(`/share/${d}`):p({type:"error",message:s.data.message})}catch(s){console.log(s)}};return(s,r)=>{const I=o("Avatar"),k=o("el-input"),w=o("el-button"),C=o("el-form-item"),x=o("el-form");return B(),E("div",q,[e("div",z,[U,e("div",$,[e("div",j,[e("div",F,[t(I,{userId:a.value.userId,avatar:a.value.avatar,width:50},null,8,["userId","avatar"])]),e("div",G,[e("div",H,[e("span",J,l(a.value.nickName),1),e("span",O,"分享于 "+l(a.value.shareTime),1)]),e("div",P,"分享文件："+l(a.value.fileName),1)])]),e("div",Q,[W,e("div",X,[t(x,{model:c.value,rules:S,ref_key:"formDataRef",ref:u,maxLength:5,onSubmit:r[1]||(r[1]=L(()=>{},["prevent"]))},{default:_(()=>[t(C,{prop:"code"},{default:_(()=>[t(k,{class:"input",modelValue:c.value.code,"onUpdate:modelValue":r[0]||(r[0]=b=>c.value.code=b),onKeyup:K(m,["enter"])},null,8,["modelValue","onKeyup"]),t(w,{type:"primary",onClick:m},{default:_(()=>[A("提取文件")]),_:1})]),_:1})]),_:1},8,["model"])])])])])])}}},se=V(Y,[["__scopeId","data-v-d570a77d"]]);export{se as default};
